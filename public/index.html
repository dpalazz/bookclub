<!DOCTYPE html>
<html ng-app="Shelf_Help">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="/css/main.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-route.min.js" charset="utf-8"></script>
    <script type="text/javascript"   src="/js/config.js"></script>
    <script type="text/javascript" src="/js/app.js"></script>
    <base href="/" target="_blank">
  </head>
  <body>
    <div class="header">
      <div class="nav">
        <nav>
          <div>
            <a href="#">Login</a> |
            <a href="/register">Register</a> |
            <a href="#">username</a>
          </div>
          <div>
            Search
            <input type="text" ng-model="searchBox">
          </div>
        </nav>
      </div>
      <div class="inner-header">
        <div class="title-images">
          <img src="./assets/images/anthony-tran-378336.jpg">
          <img src="./assets/images/amirreza-fardad-426198.jpg">
          <img src="./assets/images/clay-banks-258326.jpg">
        </div>
        <div class="title">
          <h3>There's no shame in a little</h3>
          <h1>Shelf Help</h1>
        </div>
      </div>
    </div>

    <main >
      <h3 class="index-line">Popular on Shelf Help</h3>
      <div ng-controller='MainController as ctrl1' class="book-index">
        <div class="book-show-section" ng-class="(ctrl1.book? 'show' : '')">
          <div class='close' ng-click="ctrl1.book = null">x</div>
          <div class="book-show" >
            <img ng-src={{ctrl1.book.volumeInfo.imageLinks.thumbnail}}>
            <div class="show-text">
              <h4>{{ctrl1.book.volumeInfo.title}}</h4>
              <div>
                <h5 class="by">by</h5>
                <h5 ng-repeat="author in ctrl1.book.volumeInfo.authors">
                  {{author}}
                </h5>
              </div>
              <p>
                {{ctrl1.book.volumeInfo.description}}
              </p>
            </div>
          </div>
        </div>

        <div class="book-card" ng-repeat="book in ctrl1.books | limitTo:4">
          <div class="img-like">
            <img ng-click="ctrl1.getBook(book)" ng-src={{book.volumeInfo.imageLinks.smallThumbnail}}>
            <h2>+</h2>
          </div>
          <h4 ng-click="ctrl1.getBook(book)">{{book.volumeInfo.title}}</h4>
          <div class="author">
            <h5 class="by">by</h5>
            <h5> {{book.volumeInfo.authors[0]}}</h5>
            <h5 ng-if="book.volumeInfo.authors.length > 1">, ...</h5>
          </div>
        </div>
      </div>

      <div ng-controller='MainController as ctrl2' class="book-index">

        <div class="book-show-section" ng-class="(ctrl2.book? 'show' : '')">
          <div class='close' ng-click="ctrl2.book = null">x</div>
          <div class="book-show" >
            <img ng-src={{ctrl2.book.volumeInfo.imageLinks.thumbnail}}>
            <div class="show-text">
              <h4>{{ctrl2.book.volumeInfo.title}}</h4>
              <div>
                <h5 class="by">by</h5>
                <h5 ng-repeat="author in ctrl2.book.volumeInfo.authors">
                  {{author}}
                </h5>
              </div>
              <p>
                {{ctrl2.book.volumeInfo.description}}
              </p>
            </div>
          </div>
        </div>

        <div class="book-card" ng-repeat="book in ctrl2.books | limitTo:-4">
          <div class="img-like">
            <img ng-click="ctrl2.getBook(book)" ng-src={{book.volumeInfo.imageLinks.smallThumbnail}}>
            <h2>+</h2>
          </div>
          <h4 ng-click="ctrl2.getBook(book)">{{book.volumeInfo.title}}</h4>
          <div class="author">
            <h5 class="by">by</h5>
            <h5> {{book.volumeInfo.authors[0]}}</h5>
            <h5 ng-if="book.volumeInfo.authors.length > 1">, ...</h5>
          </div>
        </div>
      </div>

    </main>


    <main ng-view></main>

    <div ng-controller="ExpanderCollapserController as ctrl" class="expand-collapse">

      <div class="collapse"
      ng-click="ctrl.expanded = false"
      ng-class="(ctrl.expanded ? '' : 'hidden')">
        <div class="collapser">
          <a href="/">
            <div class="triangle-up">
            </div>
            <h3>show less</h3>
          </a>
        </div>
      </div>

      <div class="expand"
      ng-click="ctrl.expanded = true"
      ng-class="(ctrl.expanded ? 'hidden' : '')">
        <div class="expander">
          <a href="/expandedbooks">
            <div class="triangle-down">
            </div>
            <h3>show more</h3>
          </a>
        </div>
      </div>
    </div>

    <main>
      <div ng-controller="UserShelfController as ctrl" class="book-index">

        <h2>My Shelf</h2>
        <div class="my-shelf" ng-repeat="book in ctrl.user.bookCollection">

          <div class="my-shelf-section">
            {{book}}
          </div>
        </div>
      </div>
    </main>

    <div class="index-links">
    </div>

    <div class="footer">
    </div>

  </body>
</html>
